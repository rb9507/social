{% extends "base.html" %}

{% block title %}Affiliate Users{% endblock %}

{% block content %}

<h3 class="mb-4">Affiliate Users</h3>

<div class="card shadow-sm">
  <div class="card-body">

    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Username</th>
            <th>Email</th>
            <th>Date Joined</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>

        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.date_joined|date:"d M Y" }}</td>
            <td class="text-center">

              <!-- Remove User -->
              <form action="{% url 'remove_user' user.id %}"
                    method="post"
                    class="d-inline">
                {% csrf_token %}
                <button type="submit"
                        class="btn btn-sm btn-danger"
                        onclick="return confirm('Are you sure you want to remove this user?');">
                  <i class="bi bi-trash"></i> Remove
                </button>
              </form>

            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted">
              No users found.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

{% endblock %}
