{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Affiliate Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f4f6f8;
    }
    .sidebar {
      height: 100vh;
      background: #198754;
      color: #fff;
    }
    .sidebar a {
      color: #fff;
      text-decoration: none;
      display: block;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 5px;
    }
    .sidebar a:hover {
      background: rgba(255,255,255,0.2);
    }
    .post-card {
      border-radius: 12px;
    }
  </style>
</head>
<body>

<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-2 sidebar p-3">
      <h4 class="text-center mb-4">Affiliate</h4>

      <a href="{% url 'affiliate_feed' %}">
        <i class="bi bi-house-door me-2"></i> Feed
      </a>

      <a href="{% url 'usersettings' %}">
        <i class="bi bi-gear me-2"></i> Settings
      </a>

      <a href="{% url 'affiliate_logout' %}">
        <i class="bi bi-box-arrow-right me-2"></i> Logout
      </a>
    </div>

    <!-- Main Content -->
    <div class="col-md-10 p-4">
      <h3 class="mb-4">Posts from Super Admin</h3>

      <div class="row">
<<<<<<< HEAD

=======
>>>>>>> 2d88d3fa4fa7daa3c8cf71914c64cc534fd1b187
        {% for post in posts %}
        <div class="col-md-4">
          <div class="card post-card shadow-sm mb-4">

            {% if post.image %}
              <img src="{{ post.image.url }}" class="card-img-top" alt="Post Image">
            {% endif %}

            <div class="card-body">
<<<<<<< HEAD
              <h5 class="card-title">Post</h5>

              <p class="card-text">
                {{ post.caption }}
              </p>
=======
              <p class="card-text">{{ post.caption }}</p>
>>>>>>> 2d88d3fa4fa7daa3c8cf71914c64cc534fd1b187

              <small class="text-muted">
                {{ post.created_at|date:"d M Y" }}
              </small>

              <hr>

              <div class="d-flex justify-content-between">
<<<<<<< HEAD
                <button class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-hand-thumbs-up"></i> Like
                </button>
                <button class="btn btn-outline-success btn-sm">
                  <i class="bi bi-share"></i> Share
                </button>
                <button class="btn btn-outline-secondary btn-sm">
=======
                <button
                  class="btn btn-outline-primary btn-sm like-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-hand-thumbs-up"></i> Like
                </button>

                <button
                  class="btn btn-outline-success btn-sm share-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-share"></i> Share
                </button>

                <button
                  class="btn btn-outline-secondary btn-sm comment-btn"
                  data-post-id="{{ post.id }}">
>>>>>>> 2d88d3fa4fa7daa3c8cf71914c64cc534fd1b187
                  <i class="bi bi-chat"></i> Comment
                </button>
              </div>
            </div>

          </div>
        </div>
        {% empty %}
          <p>No posts available.</p>
        {% endfor %}
<<<<<<< HEAD

=======
>>>>>>> 2d88d3fa4fa7daa3c8cf71914c64cc534fd1b187
      </div>
    </div>

  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- CSRF TOKEN -->
<script>
  const csrfToken = "{{ csrf_token }}";
</script>

<!-- AJAX LOGIC -->
<script>
/* LIKE */
document.querySelectorAll('.like-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const postId = btn.dataset.postId;

    const formData = new FormData();
    formData.append('post_id', postId);

    fetch("{% url 'like_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Post liked");
    });
  });
});

/* COMMENT */
document.querySelectorAll('.comment-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const comment = prompt("Enter your comment");
    if (!comment) return;

    const formData = new FormData();
    formData.append('post_id', btn.dataset.postId);
    formData.append('comment_text', comment);

    fetch("{% url 'comment_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Comment added");
    });
  });
});

/* SHARE */
document.querySelectorAll('.share-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const platform = prompt("Enter platform (facebook / instagram)");
    if (!platform) return;

    const formData = new FormData();
    formData.append('post_id', btn.dataset.postId);
    formData.append('platform', platform);

    fetch("{% url 'share_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Post shared");
    });
  });
});
</script>

</body>
</html> {% endcomment %}
{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Affiliate Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f4f6f8;
    }
    .sidebar {
      height: 100vh;
      background: #198754;
      color: #fff;
    }
    .sidebar a {
      color: #fff;
      text-decoration: none;
      display: block;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 5px;
    }
    .sidebar a:hover {
      background: rgba(255,255,255,0.2);
    }
    .post-card {
      border-radius: 12px;
    }
  </style>
</head>
<body>

<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-2 sidebar p-3">
      <h4 class="text-center mb-4">Affiliate</h4>
      <a href="#"><i class="bi bi-house-door me-2"></i> Feed</a>
      <a href="#"><i class="bi bi-person me-2"></i> Settings</a>
      <a href="#"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
    </div>

    <!-- Main Content -->
    <div class="col-md-10 p-4">

      <h3 class="mb-4">Posts from Super Admin</h3>

      <div class="row">

        {% for post in posts %}
        <div class="col-md-4">
          <div class="card post-card shadow-sm mb-4">

            {% if post.image %}
              <img src="{{ post.image.url }}" class="card-img-top" alt="Post Image">
            {% endif %}

            <div class="card-body">
              <h5 class="card-title">Post</h5>

              <p class="card-text">
                {{ post.caption }}
              </p>

              <small class="text-muted">
                {{ post.created_at|date:"d M Y" }}
              </small>

              <hr>

              <div class="d-flex justify-content-between">
                <button 
                  class="btn btn-outline-primary btn-sm like-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-hand-thumbs-up"></i> Like
                </button>

                <button 
                  class="btn btn-outline-success btn-sm share-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-share"></i> Share
                </button>

                <button 
                  class="btn btn-outline-secondary btn-sm comment-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-chat"></i> Comment
                </button>
              </div>
            </div>

          </div>
        </div>
        {% empty %}
          <p>No posts available.</p>
        {% endfor %}

      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- AJAX LOGIC -->
<script>
const csrfToken = '{{ csrf_token }}';

/* LIKE */
document.querySelectorAll('.like-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const postId = btn.dataset.postId;

    const formData = new FormData();
    formData.append('post_id', postId);

    fetch("{% url 'like_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(() => {
      alert("Post liked successfully");
    });
  });
});

/* COMMENT */
document.querySelectorAll('.comment-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const comment = prompt("Enter your comment");
    if (!comment) return;

    const postId = btn.dataset.postId;

    const formData = new FormData();
    formData.append('post_id', postId);
    formData.append('comment_text', comment);

    fetch("{% url 'comment_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(() => {
      alert("Comment added successfully");
    });
  });
});

/* SHARE */
document.querySelectorAll('.share-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const platform = prompt("Share platform (facebook / instagram)");
    if (!platform) return;

    const postId = btn.dataset.postId;

    const formData = new FormData();
    formData.append('post_id', postId);
    formData.append('platform', platform);

    fetch("{% url 'share_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(() => {
      alert("Post shared successfully");
    });
  });
});
</script>

</body>
</html> {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Affiliate Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f4f6f8;
    }
    .sidebar {
      height: 100vh;
      background: #198754;
      color: #fff;
    }
    .sidebar a {
      color: #fff;
      text-decoration: none;
      display: block;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 5px;
    }
    .sidebar a:hover {
      background: rgba(255,255,255,0.2);
    }
    .post-card {
      border-radius: 12px;
    }
  </style>
</head>
<body>

<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-2 sidebar p-3">
      <h4 class="text-center mb-4">Affiliate</h4>

      <a href="{% url 'affiliate_feed' %}">
        <i class="bi bi-house-door me-2"></i> Feed
      </a>

      <a href="{% url 'settings' %}">
        <i class="bi bi-gear me-2"></i> Settings
      </a>

      <a href="{% url 'affiliate_logout' %}">
        <i class="bi bi-box-arrow-right me-2"></i> Logout
      </a>
    </div>

    <!-- Main Content -->
    <div class="col-md-10 p-4">
      <h3 class="mb-4">Posts from Super Admin</h3>

      <div class="row">
        {% for post in posts %}
        <div class="col-md-4">
          <div class="card post-card shadow-sm mb-4">

            {% if post.image %}
              <img src="{{ post.image.url }}" class="card-img-top" alt="Post Image">
            {% endif %}

            <div class="card-body">
              <p class="card-text">{{ post.caption }}</p>

              <small class="text-muted">
                {{ post.created_at|date:"d M Y" }}
              </small>

              <hr>

              <div class="d-flex justify-content-between">
                <button
                  class="btn btn-outline-primary btn-sm like-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-hand-thumbs-up"></i> Like
                </button>

                <button
                  class="btn btn-outline-success btn-sm share-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-share"></i> Share
                </button>

                <button
                  class="btn btn-outline-secondary btn-sm comment-btn"
                  data-post-id="{{ post.id }}">
                  <i class="bi bi-chat"></i> Comment
                </button>
              </div>
            </div>

          </div>
        </div>
        {% empty %}
          <p>No posts available.</p>
        {% endfor %}
      </div>
    </div>

  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- CSRF TOKEN -->
<script>
  const csrfToken = "{{ csrf_token }}";
</script>

<!-- AJAX LOGIC -->
<script>
/* LIKE */
document.querySelectorAll('.like-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const postId = btn.dataset.postId;

    const formData = new FormData();
    formData.append('post_id', postId);

    fetch("{% url 'like_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Post liked");
    });
  });
});

/* COMMENT */
document.querySelectorAll('.comment-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const comment = prompt("Enter your comment");
    if (!comment) return;

    const formData = new FormData();
    formData.append('post_id', btn.dataset.postId);
    formData.append('comment_text', comment);

    fetch("{% url 'comment_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Comment added");
    });
  });
});

/* SHARE */
document.querySelectorAll('.share-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const platform = prompt("Enter platform (facebook / instagram)");
    if (!platform) return;

    const formData = new FormData();
    formData.append('post_id', btn.dataset.postId);
    formData.append('platform', platform);

    fetch("{% url 'share_post' %}", {
      method: 'POST',
      headers: { 'X-CSRFToken': csrfToken },
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message || "Post shared");
    });
  });
});
</script>

</body>
</html>
